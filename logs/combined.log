2025-06-06T17:14:44.615Z info: Server running on port 1340
2025-06-06T17:14:44.659Z error: Database initialization failed: Access denied for user 'admin_naman'@'localhost' (using password: YES)
2025-06-06T17:15:07.951Z info: Server running on port 1340
2025-06-06T17:15:07.966Z error: Database initialization failed: Access denied for user 'admin_naman'@'localhost' (using password: YES)
{"function":"fetchMediaContentForForwarding","level":"info","mediaId":"test_media***","message":"Starting fetchMediaContentForForwarding flow","service":"jewelry-api","timestamp":"2025-06-08 11:49:22"}
{"function":"getMediaDetails","level":"info","mediaId":"test_media***","message":"Starting getMediaDetails request","service":"jewelry-api","timestamp":"2025-06-08 11:49:22"}
{"function":"getMediaDetails","level":"error","mediaId":"test_media***","message":"WhatsApp API request failed","responseTime":490,"service":"jewelry-api","status":400,"statusText":"Bad Request","timestamp":"2025-06-08 11:49:22"}
{"error":"WhatsApp API request failed: 400 Bad Request","function":"getMediaDetails","level":"error","mediaId":"test_media***","message":"getMediaDetails failed","responseTime":491,"service":"jewelry-api","stack":"Error: WhatsApp API request failed: 400 Bad Request\n    at getMediaDetails (/Users/namansetty/Documents/BSGold-Naman-Dashboard/src/utils/apiUtils.js:78:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async fetchMediaContentForForwarding (/Users/namansetty/Documents/BSGold-Naman-Dashboard/src/utils/apiUtils.js:257:26)\n    at async testMediaForwarding (/Users/namansetty/Documents/BSGold-Naman-Dashboard/test-media-forwarding.js:69:22)","timestamp":"2025-06-08 11:49:22"}
{"error":"WhatsApp API request failed: 400 Bad Request","function":"fetchMediaContentForForwarding","level":"warn","mediaId":"test_media***","message":"Permanent media upload failed, attempting fallback","processingTime":492,"service":"jewelry-api","timestamp":"2025-06-08 11:49:22"}
{"function":"getMediaDetails","level":"info","mediaId":"test_media***","message":"Starting getMediaDetails request","service":"jewelry-api","timestamp":"2025-06-08 11:49:22"}
{"function":"getMediaDetails","level":"error","mediaId":"test_media***","message":"WhatsApp API request failed","responseTime":239,"service":"jewelry-api","status":400,"statusText":"Bad Request","timestamp":"2025-06-08 11:49:23"}
{"error":"WhatsApp API request failed: 400 Bad Request","function":"getMediaDetails","level":"error","mediaId":"test_media***","message":"getMediaDetails failed","responseTime":239,"service":"jewelry-api","stack":"Error: WhatsApp API request failed: 400 Bad Request\n    at getMediaDetails (/Users/namansetty/Documents/BSGold-Naman-Dashboard/src/utils/apiUtils.js:78:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async fetchMediaContentForForwarding (/Users/namansetty/Documents/BSGold-Naman-Dashboard/src/utils/apiUtils.js:333:28)\n    at async testMediaForwarding (/Users/namansetty/Documents/BSGold-Naman-Dashboard/test-media-forwarding.js:69:22)","timestamp":"2025-06-08 11:49:23"}
{"fallbackError":"WhatsApp API request failed: 400 Bad Request","function":"fetchMediaContentForForwarding","level":"error","mediaId":"test_media***","message":"Both permanent upload and fallback failed","originalError":"WhatsApp API request failed: 400 Bad Request","service":"jewelry-api","stack":"Error: WhatsApp API request failed: 400 Bad Request\n    at getMediaDetails (/Users/namansetty/Documents/BSGold-Naman-Dashboard/src/utils/apiUtils.js:78:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async fetchMediaContentForForwarding (/Users/namansetty/Documents/BSGold-Naman-Dashboard/src/utils/apiUtils.js:257:26)\n    at async testMediaForwarding (/Users/namansetty/Documents/BSGold-Naman-Dashboard/test-media-forwarding.js:69:22)","timestamp":"2025-06-08 11:49:23","totalProcessingTime":492}
{"function":"forwardMessage","hasMediaId":false,"level":"info","message":"Starting forwardMessage request","originalMessageId":"msg_123","recipientPhone":"***7890","senderType":"enterprise","service":"jewelry-api","targetOrderId":"ORDER_TEST_001","timestamp":"2025-06-08 11:49:23"}
{"function":"sendWhatsAppMessage","level":"info","message":"Starting sendWhatsAppMessage request","messageLength":33,"orderId":"ORDER_TEST_001","phoneNumber":"***7890","service":"jewelry-api","timestamp":"2025-06-08 11:49:23"}
{"contactWaId":"911234567890","function":"sendWhatsAppMessage","level":"info","message":"sendWhatsAppMessage completed successfully","messageId":"wamid.HBgMOTExMjM0NTY3ODkwFQIAERgSQUQ4QkU1NEQwRDU1MkE2NjdCAA==","orderId":"ORDER_TEST_001","phoneNumber":"***7890","responseTime":1004,"service":"jewelry-api","timestamp":"2025-06-08 11:49:24"}
{"contentLength":33,"function":"saveMessage","hasContent":true,"hasForwardedFrom":true,"hasOriginalMessageId":true,"level":"info","message":"Starting saveMessage request","orderId":"ORDER_TEST_001","senderType":"enterprise","service":"jewelry-api","timestamp":"2025-06-08 11:49:24"}
{"function":"saveMessage","level":"error","message":"Save message request failed","orderId":"ORDER_TEST_001","responseTime":128968,"service":"jewelry-api","status":404,"statusText":"Not Found","timestamp":"2025-06-08 11:51:33"}
{"error":"Save message request failed: 404 Not Found","function":"saveMessage","level":"error","message":"saveMessage failed","orderId":"ORDER_TEST_001","responseTime":128969,"senderType":"enterprise","service":"jewelry-api","stack":"Error: Save message request failed: 404 Not Found\n    at saveMessage (/Users/namansetty/Documents/BSGold-Naman-Dashboard/src/utils/apiUtils.js:738:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async forwardMessage (/Users/namansetty/Documents/BSGold-Naman-Dashboard/src/utils/apiUtils.js:462:24)\n    at async testMediaForwarding (/Users/namansetty/Documents/BSGold-Naman-Dashboard/test-media-forwarding.js:95:22)","timestamp":"2025-06-08 11:51:33"}
{"error":"Save message request failed: 404 Not Found","function":"forwardMessage","level":"error","message":"forwardMessage failed","originalMessageId":"msg_123","recipientPhone":"***7890","service":"jewelry-api","stack":"Error: Save message request failed: 404 Not Found\n    at saveMessage (/Users/namansetty/Documents/BSGold-Naman-Dashboard/src/utils/apiUtils.js:738:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async forwardMessage (/Users/namansetty/Documents/BSGold-Naman-Dashboard/src/utils/apiUtils.js:462:24)\n    at async testMediaForwarding (/Users/namansetty/Documents/BSGold-Naman-Dashboard/test-media-forwarding.js:95:22)","targetOrderId":"ORDER_TEST_001","timestamp":"2025-06-08 11:51:33","totalProcessingTime":129975}
{"function":"getMediaDetails","level":"info","mediaId":"test_media***","message":"Starting getMediaDetails request","service":"jewelry-api","timestamp":"2025-06-08 11:51:33"}
{"function":"getMediaDetails","level":"error","mediaId":"test_media***","message":"WhatsApp API request failed","responseTime":243,"service":"jewelry-api","status":400,"statusText":"Bad Request","timestamp":"2025-06-08 11:51:33"}
{"error":"WhatsApp API request failed: 400 Bad Request","function":"getMediaDetails","level":"error","mediaId":"test_media***","message":"getMediaDetails failed","responseTime":243,"service":"jewelry-api","stack":"Error: WhatsApp API request failed: 400 Bad Request\n    at getMediaDetails (/Users/namansetty/Documents/BSGold-Naman-Dashboard/src/utils/apiUtils.js:78:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async testMediaForwarding (/Users/namansetty/Documents/BSGold-Naman-Dashboard/test-media-forwarding.js:122:7)","timestamp":"2025-06-08 11:51:33"}
{"function":"fetchMediaContentForForwarding","level":"info","mediaId":"invalid_me***","message":"Starting fetchMediaContentForForwarding flow","service":"jewelry-api","timestamp":"2025-06-08 11:51:33"}
{"function":"getMediaDetails","level":"info","mediaId":"invalid_me***","message":"Starting getMediaDetails request","service":"jewelry-api","timestamp":"2025-06-08 11:51:33"}
{"function":"getMediaDetails","level":"error","mediaId":"invalid_me***","message":"WhatsApp API request failed","responseTime":287,"service":"jewelry-api","status":400,"statusText":"Bad Request","timestamp":"2025-06-08 11:51:33"}
{"error":"WhatsApp API request failed: 400 Bad Request","function":"getMediaDetails","level":"error","mediaId":"invalid_me***","message":"getMediaDetails failed","responseTime":287,"service":"jewelry-api","stack":"Error: WhatsApp API request failed: 400 Bad Request\n    at getMediaDetails (/Users/namansetty/Documents/BSGold-Naman-Dashboard/src/utils/apiUtils.js:78:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async fetchMediaContentForForwarding (/Users/namansetty/Documents/BSGold-Naman-Dashboard/src/utils/apiUtils.js:257:26)\n    at async testMediaForwarding (/Users/namansetty/Documents/BSGold-Naman-Dashboard/test-media-forwarding.js:154:7)","timestamp":"2025-06-08 11:51:33"}
{"error":"WhatsApp API request failed: 400 Bad Request","function":"fetchMediaContentForForwarding","level":"warn","mediaId":"invalid_me***","message":"Permanent media upload failed, attempting fallback","processingTime":288,"service":"jewelry-api","timestamp":"2025-06-08 11:51:33"}
{"function":"getMediaDetails","level":"info","mediaId":"invalid_me***","message":"Starting getMediaDetails request","service":"jewelry-api","timestamp":"2025-06-08 11:51:33"}
{"function":"getMediaDetails","level":"error","mediaId":"invalid_me***","message":"WhatsApp API request failed","responseTime":219,"service":"jewelry-api","status":400,"statusText":"Bad Request","timestamp":"2025-06-08 11:51:33"}
{"error":"WhatsApp API request failed: 400 Bad Request","function":"getMediaDetails","level":"error","mediaId":"invalid_me***","message":"getMediaDetails failed","responseTime":219,"service":"jewelry-api","stack":"Error: WhatsApp API request failed: 400 Bad Request\n    at getMediaDetails (/Users/namansetty/Documents/BSGold-Naman-Dashboard/src/utils/apiUtils.js:78:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async fetchMediaContentForForwarding (/Users/namansetty/Documents/BSGold-Naman-Dashboard/src/utils/apiUtils.js:333:28)\n    at async testMediaForwarding (/Users/namansetty/Documents/BSGold-Naman-Dashboard/test-media-forwarding.js:154:7)","timestamp":"2025-06-08 11:51:33"}
{"fallbackError":"WhatsApp API request failed: 400 Bad Request","function":"fetchMediaContentForForwarding","level":"error","mediaId":"invalid_me***","message":"Both permanent upload and fallback failed","originalError":"WhatsApp API request failed: 400 Bad Request","service":"jewelry-api","stack":"Error: WhatsApp API request failed: 400 Bad Request\n    at getMediaDetails (/Users/namansetty/Documents/BSGold-Naman-Dashboard/src/utils/apiUtils.js:78:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async fetchMediaContentForForwarding (/Users/namansetty/Documents/BSGold-Naman-Dashboard/src/utils/apiUtils.js:257:26)\n    at async testMediaForwarding (/Users/namansetty/Documents/BSGold-Naman-Dashboard/test-media-forwarding.js:154:7)","timestamp":"2025-06-08 11:51:33","totalProcessingTime":288}
2025-06-09T02:05:57.806Z info: Server running on port 1340
2025-06-09T02:05:57.823Z error: Database initialization failed: Access denied for user 'admin_naman'@'localhost' (using password: YES)
